{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="booking-container">
    <h2>Забронировать столик</h2>
    
    <div class="booking-info">
        <p><strong>Важная информация:</strong></p>
        <ul>
            <li>Максимальное количество гостей за одним столиком: <strong>5 человек</strong></li>
            <li>Отменить бронирование можно за 10+ часов до начала</li>
            <li>Подтверждение бронирования придет в течение 2 часов</li>
        </ul>
    </div>
    
    <form method="post" class="booking-form">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="{{ form.table_number.id_for_label }}">{{ form.table_number.label }}</label>
            {{ form.table_number }}
            {% if form.table_number.errors %}
            <div class="error">{{ form.table_number.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.date.id_for_label }}">{{ form.date.label }}</label>
            {{ form.date }}
            {% if form.date.errors %}
            <div class="error">{{ form.date.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.time.id_for_label }}">{{ form.time.label }}</label>
            {{ form.time }}
            {% if form.time.errors %}
            <div class="error">{{ form.time.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.guests.id_for_label }}">{{ form.guests.label }}</label>
            {{ form.guests }}
            <small>Максимум 5 гостей за столик</small>
            {% if form.guests.errors %}
            <div class="error">{{ form.guests.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.phone.id_for_label }}">{{ form.phone.label }}</label>
            {{ form.phone }}
            <small>Формат: +7XXXXXXXXXX (10 цифр после +7)</small>
            {% if form.phone.errors %}
            <div class="error">{{ form.phone.errors }}</div>
            {% endif %}
        </div>
        
        <button type="submit" class="submit-btn">Забронировать</button>
    </form>
    
</div>


   
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const phoneInput = document.querySelector('input[name="phone"]');
        
        phoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            
            if (value.startsWith('7')) {
                value = '+7' + value.substring(1);
            } else if (value.startsWith('8')) {
                value = '+7' + value.substring(1);
            } else if (!value.startsWith('+7') && value.length > 0) {
                value = '+7' + value;
            }
            
            if (value.length > 12) {
                value = value.substring(0, 12);
            }
            
            e.target.value = value;
        });
        
        const guestsInput = document.querySelector('input[name="guests"]');
        guestsInput.addEventListener('change', function() {
            let value = parseInt(this.value);
            if (value < 1) this.value = 1;
            if (value > 5) this.value = 5;
        });
    });
</script>
{% endblock %}